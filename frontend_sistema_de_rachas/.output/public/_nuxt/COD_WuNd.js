import{s as k}from"./BBBURVE2.js";import{m as _,r as c,Z as v,p as x,c as w,a as l,b as o,y as a,w as m,$ as F,o as $,t as D}from"./DJoCQzgD.js";import{a as r,s as j}from"./CyxjX5yh.js";import{s as p}from"./BKAYiMY5.js";import{g as A,d as E}from"./Ct042bsD.js";import"./BMutFdwR.js";import"./By36ONhC.js";import"./CZGk8w3r.js";import"./1R96cE9n.js";import"./DDSFaLPl.js";import"./z94W3lgw.js";import"./D3BmJwgN.js";import"./D781cylh.js";import"./BpnfKLQc.js";import"./D630mdnj.js";import"./D8NCiHfp.js";import"./BF-rSLMc.js";import"./BcjbkUIV.js";import"./C4kqpmWP.js";import"./Lk2AerRB.js";import"./DDrKUIu6.js";const S={class:"my-fields"},T={class:"container mx-auto p-4"},oe=_({__name:"index",setup(V){const s=c([]),d=F(),u=v(),f=c(null),g=async()=>{console.log("Carregando campos...");try{const e=await A();console.log("Resposta da API:",e),Array.isArray(e)?(s.value=e,console.log("Campos carregados:",s.value)):console.error("Nenhum campo encontrado ou formato inválido")}catch(e){console.error("Erro ao carregar campos:",e)}};x(()=>{g();const e=c();console.log("Perfil atual",e.value)});const C=()=>{d.push("fields/register")},h=e=>{d.push(`/fields/${e.id}/edit`)},y=e=>{u.require({message:"Você tem certeza que deseja excluir este item?",header:"Confirmação",icon:"pi pi-exclamation-triangle",acceptLabel:"Confirmar",rejectLabel:"Cancelar",acceptClass:"p-button-primary",rejectClass:"p-button-secondary",accept:async()=>{try{if(!localStorage.getItem("userToken"))throw new Error("Token não encontrado. Faça login novamente.");const i=await E(e.id);console.log("Campo deletado com sucesso:",i),s.value=s.value.filter(t=>t.id!==e.id),alert(`Campo "${e.name}" apagado.`)}catch(n){console.error("Erro ao deletar campo",n)}console.log("Item excluído")},reject:()=>{console.log("Exclusão cancelada")}})};return(e,n)=>{const i=k;return $(),w("div",S,[l("div",T,[n[0]||(n[0]=l("h1",{class:"text-2xl font-bold mb-4"},"Meus Campos",-1)),o(a(p),{label:"Adicionar Campo",onClick:C,class:"mb-4 bg-blue-600"}),o(a(j),{value:s.value,class:"mt-2"},{default:m(()=>[o(a(r),{field:"name",header:"Nome do Campo"}),o(a(r),{field:"location",header:"Localização"}),o(a(r),{field:"rentalValue",header:"Valor por Hora"}),o(a(r),{field:"pixKey",header:"Chave Pix"}),o(a(r),{field:"workDays",header:"Dias de Funcionamento"},{body:m(t=>[l("span",null,D(t.data.workDays.join(", ")),1)]),_:1}),o(a(r),{field:"workStartTime",header:"Hora Início"}),o(a(r),{field:"workFinishTime",header:"Hora Término"}),o(a(r),{header:"Ações"},{body:m(t=>[o(a(p),{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:b=>h(t.data)},null,8,["onClick"]),o(a(p),{icon:"pi pi-times",class:"p-button-rounded p-button-danger",onClick:b=>y(t.data)},null,8,["onClick"]),o(i,{ref_key:"confirmPopup",ref:f},null,512)]),_:1})]),_:1},8,["value"])])])}}});export{oe as default};
