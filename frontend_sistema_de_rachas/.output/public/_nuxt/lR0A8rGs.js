import{_ as W}from"./D72-8j2z.js";import J from"./Dv-jmtlH.js";import{s as U}from"./By36ONhC.js";import{s as Z}from"./BKAYiMY5.js";import{a4 as X,m as Y,v as ee,Z as te,r as v,ah as se,g as ae,p as oe,D as g,w as u,$ as ie,o as i,a as e,c as l,b as r,d as re,t as d,a0 as C,a1 as E,y as le,C as ne,a3 as de}from"./DJoCQzgD.js";import{Q as ce}from"./BrLn-ZIq.js";import{b as ue,d as me}from"./BhaXg5TM.js";import pe from"./CHC1UR1Y.js";import{_ as k}from"./BODeONSb.js";import{s as fe}from"./36-hy5yO.js";import{_ as V}from"./D5jqPnZi.js";import{P as c}from"./BdHHas3-.js";import"./CZGk8w3r.js";import"./1R96cE9n.js";import"./DDSFaLPl.js";import"./z94W3lgw.js";import"./D3BmJwgN.js";import"./D781cylh.js";import"./C932wzq6.js";import"./BpnfKLQc.js";import"./D630mdnj.js";import"./D8NCiHfp.js";import"./BF-rSLMc.js";import"./BcjbkUIV.js";import"./Lk2AerRB.js";import"./DkoVl_HO.js";import"./Ct042bsD.js";import"./BPPhziw8.js";const ve=async P=>{const{$api:h}=X();return(await h.get(`/match/${P}/generate-teams-by-players-stars`)).data},xe={class:"container mx-auto"},ye={class:"flex justify-between items-center mb-6"},_e={class:"text-2xl font-bold text-center flex-1"},ge={class:"flex gap-x-2"},he={key:0,class:"flex justify-center items-center py-8"},be={key:1,class:"flex flex-col gap-4"},Ce={class:"grid grid-cols-3 gap-4"},Ee={class:"text-base"},ke={class:"text-base"},we={class:"text-base"},Re={class:"flex flex-wrap gap-2"},Pe={class:"text-sm truncate"},De={class:"flex items-center justify-between"},Ie={class:"flex items-center gap-x-4"},Te={class:"text-base"},Fe={class:"flex gap-x-2"},Ne={class:"flex flex-col gap-4"},Ve={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},Le={key:0},Me={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Ae={class:"flex justify-between items-center mb-3 pb-2 border-b border-white/10"},Ke={class:"font-medium"},Se={class:"text-xs bg-emerald-400 text-zinc-950 px-2 py-1 rounded"},Be={class:"grid gap-2"},Qe={class:"flex justify-center"},je={class:"flex justify-end gap-4 mt-4"},Ge={key:2},$e={key:3,class:"text-center text-lg"},qe={class:"flex flex-col items-center gap-4 p-4"},ze={class:"qr-code-container bg-white p-4 rounded-lg shadow-md"},Oe={key:1,class:"w-48 h-48 flex items-center justify-center"},He={class:"text-sm text-gray-600 text-center"},We={class:"flex flex-col gap-4 p-4"},Je={class:"flex justify-end gap-x-2"},kt=Y({__name:"index",setup(P){const h=ie(),D=se(),p=ee();te();const o=v(null),w=v(!0),f=v(!1),x=v(!1),R=v(null),y=v(!1),b=D.params.id,I={[c.GOALKEEPER]:"GL",[c.DEFENDER]:"ZG",[c.RIGHT_BACK]:"LD",[c.LEFT_BACK]:"LE",[c.MIDFIELDER]:"ME",[c.DEFENSIVE_MIDFIELDER]:"VOL",[c.ATTACKING_MIDFIELDER]:"MA",[c.RIGHT_WINGER]:"PD",[c.LEFT_WINGER]:"PE",[c.FORWARD]:"AT",[c.STRIKER]:"CA"},L=s=>s.players.reduce((t,_)=>t+(_.stars||1),0);async function M(){try{w.value=!0;const s=await ue(b);o.value=s}catch(s){console.error("Erro ao buscar a partida:",s),p.add({severity:"error",summary:"Erro",detail:"Não foi possível carregar a partida",life:3e3})}finally{w.value=!1}}function A(){f.value=!0}function T(){f.value=!1}async function K(s){o.value=s,f.value=!1,p.add({severity:"success",summary:"Sucesso",detail:"Partida atualizada com sucesso!",life:3e3})}function S(){var s,t;(t=(s=o.value)==null?void 0:s.soccerField)!=null&&t.pixKey&&(navigator.clipboard.writeText(o.value.soccerField.pixKey),p.add({severity:"success",summary:"Copiado",detail:"Chave Pix copiada para a área de transferência!",life:3e3}))}function B(){x.value=!0}async function Q(){var s,t;if(!R.value||!((t=(s=o.value)==null?void 0:s.soccerField)!=null&&t.pixKey)){console.error("Canvas ou chave PIX não disponível");return}try{await ce.toCanvas(R.value,o.value.soccerField.pixKey,{width:192,margin:1})}catch(_){console.error("Erro ao gerar QR Code:",_),p.add({severity:"error",summary:"Erro",detail:"Não foi possível gerar o QR Code",life:3e3})}}ae(x,s=>{s&&de(()=>{Q()})});async function j(){var s;try{const t=await ve(b);h.push({name:"matches-id-sorted_times",params:{id:b},query:{teams:JSON.stringify(t.data)}})}catch(t){console.error("Erro ao sortear times:",t),p.add({severity:"error",summary:"Erro",detail:((s=t.response)==null?void 0:s.data)||"Erro ao sortear os times",life:3e3})}}function G(){y.value=!0}async function $(){try{await me(b),p.add({severity:"success",summary:"Sucesso",detail:"Partida excluída com sucesso!",life:3e3}),h.push("/dashboard-client")}catch(s){console.error("Erro ao excluir partida:",s),p.add({severity:"error",summary:"Erro",detail:"Não foi possível excluir a partida",life:3e3})}finally{y.value=!1}}return oe(()=>{M()}),(s,t)=>{const _=W,m=Z,F=U,q=J;return i(),g(q,null,{default:u(()=>{var N;return[e("div",xe,[e("div",ye,[r(_,{to:"/dashboard-client",class:"flex items-center gap-x-2 text-sm hover:text-primary transition-colors"},{default:u(()=>t[3]||(t[3]=[e("i",{class:"pi pi-arrow-left"},null,-1),re(" Voltar ")])),_:1}),e("h1",_e,d(f.value?"Editar Partida":(N=o.value)==null?void 0:N.name),1),e("div",ge,[f.value?(i(),g(m,{key:1,severity:"secondary",label:"Cancelar",icon:"pi pi-times",onClick:T})):(i(),g(m,{key:0,label:"Editar",icon:"pi pi-pencil",onClick:A}))])]),w.value?(i(),l("div",he,t[4]||(t[4]=[e("i",{class:"pi pi-spin pi-spinner text-4xl"},null,-1)]))):!f.value&&o.value?(i(),l("div",be,[r(k,{title:"Informações da Partida"},{content:u(()=>{var a;return[e("div",Ce,[e("div",null,[t[5]||(t[5]=e("h2",{class:"text-sm font-medium text-black/70 mb-1"},"Nome da Partida:",-1)),e("p",Ee,d(o.value.name),1)]),e("div",null,[t[6]||(t[6]=e("h2",{class:"text-sm font-medium text-black/70 mb-1"},"Descrição:",-1)),e("p",ke,d(o.value.description),1)]),e("div",null,[t[7]||(t[7]=e("h2",{class:"text-sm font-medium text-black/70 mb-1"},"Campo:",-1)),e("p",we,d((a=o.value.soccerField)==null?void 0:a.name),1)])])]}),_:1}),r(k,{title:"Horário da Partida"},{content:u(()=>[e("div",Re,[(i(!0),l(C,null,E(o.value.schedules,(a,n)=>(i(),g(le(fe),{key:n,class:"max-w-full"},{default:u(()=>[e("p",Pe,d(a.day)+" das "+d(a.startTime)+" até "+d(a.finishTime),1)]),_:2},1024))),128))])]),_:1}),r(k,{title:"Pagamento"},{content:u(()=>{var a;return[e("div",De,[e("div",Ie,[e("div",null,[t[8]||(t[8]=e("h2",{class:"text-sm font-medium text-black/70 mb-1"},"Chave Pix:",-1)),e("p",Te,d((a=o.value.soccerField)==null?void 0:a.pixKey),1)]),e("div",Fe,[r(m,{label:"Copiar Chave Pix",icon:"pi pi-copy",severity:"secondary",onClick:S}),r(m,{label:"Ver QR Code",icon:"pi pi-qrcode",severity:"secondary",onClick:B})])])])]}),_:1}),r(k,{title:"Participantes"},{content:u(()=>{var a;return[e("div",Ne,[e("div",null,[t[9]||(t[9]=e("h3",{class:"text-sm font-medium text-black/70 mb-2"},"Jogadores",-1)),e("div",Ve,[(i(!0),l(C,null,E(o.value.players,n=>(i(),l("div",{key:n.id,class:"bg-black/5 rounded p-2"},[r(V,{player:n,playerPositionAbbreviations:I,showRemove:!1,"is-editable":!1},null,8,["player"])]))),128))])]),(a=o.value.teams)!=null&&a.length?(i(),l("div",Le,[t[10]||(t[10]=e("h3",{class:"text-sm font-medium text-black/70 mb-2"},"Times",-1)),e("div",Me,[(i(!0),l(C,null,E(o.value.teams,(n,z)=>(i(),l("div",{key:z,class:"bg-black/5 rounded p-3"},[e("div",Ae,[e("h4",Ke,d(n.name),1),e("span",Se,d(L(n))+" estrelas ",1)]),e("div",Be,[(i(!0),l(C,null,E(n.players,(O,H)=>(i(),g(V,{key:H,player:O,playerPositionAbbreviations:I,showRemove:!1,"is-editable":!1},null,8,["player"]))),128))])]))),128))])])):ne("",!0),e("div",Qe,[r(m,{label:"Sortear times",icon:"pi pi-star",class:"mt-4",onClick:j})])])]}),_:1}),e("div",je,[r(m,{label:"Excluir",icon:"pi pi-trash",severity:"danger",onClick:G})])])):f.value&&o.value?(i(),l("div",Ge,[r(pe,{"initial-data":o.value,onSave:K,onCancel:T},null,8,["initial-data"])])):(i(),l("div",$e,"Carregando partida...")),r(F,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=a=>x.value=a),header:"QR Code Pix",modal:!0,closable:!0,style:{width:"400px"}},{default:u(()=>{var a,n;return[e("div",qe,[t[11]||(t[11]=e("p",{class:"font-medium text-lg text-center"}," Escaneie o QR Code para realizar o pagamento ",-1)),e("div",ze,[x.value?(i(),l("canvas",{key:0,ref_key:"qrCodeCanvas",ref:R,class:"w-48 h-48"},null,512)):(i(),l("div",Oe," Gerando QR Code... "))]),e("p",He," Chave Pix: "+d((n=(a=o.value)==null?void 0:a.soccerField)==null?void 0:n.pixKey),1)])]}),_:1},8,["modelValue"]),r(F,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=a=>y.value=a),header:"Confirmar Exclusão",modal:!0,closable:!0,style:{width:"400px"}},{default:u(()=>[e("div",We,[t[12]||(t[12]=e("p",null,"Tem certeza que deseja excluir esta partida?",-1)),e("div",Je,[r(m,{label:"Cancelar",severity:"secondary",onClick:t[1]||(t[1]=a=>y.value=!1)}),r(m,{label:"Excluir",severity:"danger",onClick:$})])])]),_:1},8,["modelValue"])])]}),_:1})}}});export{kt as default};
