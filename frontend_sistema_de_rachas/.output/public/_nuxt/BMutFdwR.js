import{a4 as n,r as i}from"./DJoCQzgD.js";i(null);const p=async e=>{const{$api:a}=n();return await a.post("/auth/register",{name:e.name,email:e.email,password:e.password,photoUrl:e.photoUrl,role:e.role})},u=async e=>{const{$api:a}=n();try{const o=await a.post("/auth/login",{email:e.email,password:e.password}),{token:s,userType:r,userName:t}=o.data;return console.log("[DEBUG] Response Data:",o.data),localStorage.setItem("userToken",s),localStorage.setItem("userType",r),localStorage.setItem("userName",t),console.log("[DEBUG] User info:",o.data),{token:s,userType:r,userName:t}}catch(o){throw console.error("[ERROR] Erro no login:",o.response||o),new Error("Erro durante o login. Verifique suas credenciais.")}},m=async()=>{const{$api:e}=n();try{const a=localStorage.getItem("userToken"),o=await e.get("/auth/me",{headers:{Authorization:`Bearer ${a}`}});return console.log("Auth me",o),o.data}catch(a){throw console.error("Erro ao buscar o perfil do usuário",a),new Error("Erro ao buscar o perfil do usuário.")}},d=async e=>{var o,s;const{$api:a}=n();try{const r={name:((o=e.name)==null?void 0:o.trim())||void 0,email:((s=e.email)==null?void 0:s.trim())||void 0};console.log("Enviando dados para atualização:",r);const t=localStorage.getItem("userToken");return(await a.put("/auth/update",r,{headers:{Authorization:`Bearer ${t}`}})).data}catch(r){throw console.error("Erro ao atualizar o perfil",r),r.response&&r.response.data&&r.response.data.message?new Error(r.response.data.message):new Error("Erro ao atualizar o perfil.")}};export{m as g,u as l,p as r,d as u};
