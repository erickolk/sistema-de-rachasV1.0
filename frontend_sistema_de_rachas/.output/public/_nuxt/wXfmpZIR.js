import{s as K}from"./BKAYiMY5.js";import{s as S}from"./DDrKUIu6.js";import{r as d,a6 as C,v as _,u as q,p as E,c as u,a as o,s as F,b as r,C as b,y as t,t as c,a0 as U,a1 as N,o as n}from"./DJoCQzgD.js";import{s as i}from"./D8NCiHfp.js";import{a as $,u as B}from"./Ct042bsD.js";import"./D781cylh.js";import"./DDSFaLPl.js";import"./D630mdnj.js";import"./BF-rSLMc.js";const z={class:"field-settings"},O={class:"container mx-auto flex flex-col items-center pt-8 px-16 max-w-screen-lg"},H={class:"gap-y-4 flex flex-col"},I={class:"flex gap-x-2 border border-custom rounded-md p-4"},M={key:0,class:"text-red-500 text-sm"},P={key:0,class:"text-red-500 text-sm"},R={class:"border border-custom rounded-md p-4"},A={class:"flex gap-2"},L=["for"],W={class:"border border-custom rounded-md p-4"},X={class:"flex gap-2 items-center"},se={__name:"index",setup(j){const y=["segunda","terça","quarta","quinta","sexta","sábado","domingo"],a=d({name:"",pixKey:"",price:0,availableDays:[],workTime:{start:"",end:""}}),m=d(""),p=d(""),x=d(null),v=C().params.id,f=_(),k=q(),w=async()=>{try{const s=await $(v);x.value=s,s&&(a.value={name:s.name,pixKey:s.pixKey,price:s.rentalValue,availableDays:s.workDays,workTime:{start:s.workStartTime.slice(0,5),end:s.workFinishTime.slice(0,5)}})}catch(s){console.error("Erro ao buscar dados do campo:",s)}},V=async()=>{try{if(!a.value.name||!a.value.pixKey||a.value.price<=0){a.value.name||(m.value="O nome do campo é obrigatório."),a.value.price<=0&&(p.value="O preço deve ser um número positivo.");return}const s={name:a.value.name,pixKey:a.value.pixKey,rentalValue:a.value.price,workDays:a.value.availableDays,workStartTime:`${a.value.workTime.start}:00`,workFinishTime:`${a.value.workTime.end}:00`},{status:e}=await B(v,s);e===200&&(f.add({severity:"success",summary:"Sucesso",detail:"Campo atualizado com sucesso!",life:3e3}),k.push("/dashboard"))}catch(s){console.error("Erro ao atualizar campo:",s),f.add({severity:"error",summary:"Erro",detail:"Erro ao atualizar o campo",life:3e3})}};return E(async()=>{await w()}),(s,e)=>{const g=S,T=K;return n(),u("div",z,[o("div",O,[e[12]||(e[12]=o("h1",{class:"text-2xl font-bold mb-4"},"Configurações do Campo",-1)),o("form",{onSubmit:F(V,["prevent"]),class:"w-full"},[o("div",H,[o("div",I,[o("div",null,[e[6]||(e[6]=o("label",{class:"block mb-2",for:"fieldName"},"Nome do Campo:",-1)),r(t(i),{id:"fieldName",type:"text",modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.name=l),class:"border p-2 w-full",required:""},null,8,["modelValue"]),m.value?(n(),u("p",M,c(m.value),1)):b("",!0)]),o("div",null,[e[7]||(e[7]=o("label",{class:"block mb-2",for:"pixKey"},"Chave PIX:",-1)),r(t(i),{id:"pixKey",type:"text",modelValue:a.value.pixKey,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.pixKey=l),class:"border p-2 w-full",required:""},null,8,["modelValue"])]),o("div",null,[e[8]||(e[8]=o("label",{class:"block mb-2",for:"price"},"Preço por Hora:",-1)),r(t(i),{id:"price",type:"number",modelValue:a.value.price,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.price=l),class:"border p-2 w-full",required:""},null,8,["modelValue"]),p.value?(n(),u("p",P,c(p.value),1)):b("",!0)])]),o("div",R,[e[9]||(e[9]=o("label",{class:"block mb-2"},"Dias Disponíveis:",-1)),o("div",A,[(n(),u(U,null,N(y,l=>o("div",{key:l,class:"flex items-center"},[r(g,{id:`day-${l}`,modelValue:a.value.availableDays,"onUpdate:modelValue":e[3]||(e[3]=D=>a.value.availableDays=D),value:l,class:"mr-2"},null,8,["id","modelValue","value"]),o("label",{for:`day-${l}`,class:"cursor-pointer"},c(l.charAt(0).toUpperCase()+l.slice(1)),9,L)])),64))])]),o("div",W,[e[11]||(e[11]=o("label",{class:"block mb-2"},"Horário de Funcionamento:",-1)),o("div",X,[r(t(i),{type:"time",modelValue:a.value.workTime.start,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.workTime.start=l),class:"border p-2 w-2/5",required:""},null,8,["modelValue"]),e[10]||(e[10]=o("span",null,"-",-1)),r(t(i),{type:"time",modelValue:a.value.workTime.end,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.workTime.end=l),class:"border p-2 w-2/5",required:""},null,8,["modelValue"])])]),r(T,{label:"Salvar",type:"submit",class:"w-1/4 self-end"})])],32)])])}}};export{se as default};
