import{s as v}from"./BKAYiMY5.js";import{s as g}from"./BQ82tAHq.js";import{s as x}from"./D8NCiHfp.js";import{m as V,r as d,u as k,n as _,p as y,q as E,c as R,o as h,a as o,b as a,s as B,d as p,w as L}from"./DJoCQzgD.js";import{l as N,g as T}from"./BMutFdwR.js";import"./D781cylh.js";import"./DDSFaLPl.js";import"./CZGk8w3r.js";import"./1R96cE9n.js";import"./BcjbkUIV.js";import"./BF-rSLMc.js";const U={class:"form-container-mobile"},q={class:"space-y-2 mb-8"},A={class:"mt-4"},H=V({__name:"index",setup(C){const l=d(""),n=d(""),m=k(),{setAuth:c,loadAuthState:f}=_();y(()=>{f()});const b=async()=>{try{const s={email:l.value,password:n.value},{token:e}=await N(s),r=await T(),t=r.role===1?"owner":"client",i=r.name;if(console.log("[DEBUG] User Type:",t),c({isAuthenticated:!0,userType:t,userName:i}),t==="client")await m.push("/dashboard-client");else if(t==="owner")await m.push("/dashboard");else throw new Error("Tipo de usuário inválido")}catch(s){console.error("[ERROR] Login failed:",s),alert("Erro de autenticação. Verifique suas credenciais.")}};return(s,e)=>{const r=x,t=g,i=v,w=E("RouterLink");return h(),R("div",U,[e[6]||(e[6]=o("h1",{class:"text-2xl font-bold mb-4 text-center"},"Login",-1)),o("form",{onSubmit:B(b,["prevent"])},[o("div",q,[o("div",null,[e[2]||(e[2]=o("label",{class:"block mb-2",for:"email"},"Email:",-1)),a(r,{id:"email",type:"email",modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=u=>l.value=u),class:"border p-2 w-full",required:""},null,8,["modelValue"])]),o("div",null,[e[3]||(e[3]=o("label",{class:"block mb-2",for:"password"},"Senha:",-1)),a(t,{id:"password",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=u=>n.value=u),fluid:"",required:"",toggleMask:"",feedback:!1},null,8,["modelValue"])])]),a(i,{label:"Entrar",type:"submit",class:"w-full"})],32),o("p",A,[e[5]||(e[5]=p(" Não tem uma conta? ")),a(w,{to:"/auth/register",class:"text-blue-600"},{default:L(()=>e[4]||(e[4]=[p("Registrar")])),_:1})])])}}});export{H as default};
